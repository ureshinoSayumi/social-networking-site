"use strict";(self["webpackChunksocial_networking_site"]=self["webpackChunksocial_networking_site"]||[]).push([[634],{7634:function(s,e,t){t.r(e),t.d(e,{default:function(){return $}});var r=t(3396),a=t(9242),o=t(7139);const i=s=>((0,r.dD)("data-v-cc172ef6"),s=s(),(0,r.Cn)(),s),n={class:"containers"},l={class:"row mt-3"},c=i((()=>(0,r._)("div",{class:"col"},[(0,r._)("img",{class:"mainImg",src:"https://upload.cc/i1/2022/04/11/Qq25Hw.png",alt:""})],-1))),g={class:"col"},u={class:"login-block"},d={class:"login-title"},p=i((()=>(0,r._)("img",{src:"https://upload.cc/i1/2022/04/11/3rEBmZ.png",alt:""},null,-1))),m={key:0,class:"text"},h={key:1,class:"text"},w={class:"login-input"},k={key:0,class:"mb-3"},y={key:0,class:"wrong-msg mt-1"},_={class:"mb-3"},f={key:0,class:"wrong-msg mt-1"},b={class:"mb-3"},v={key:0,class:"wrong-msg mt-1"},P={key:1,class:"mb-3"},D={key:0,class:"wrong-msg mt-1"},M={key:0,class:"wrong-msg"},I={class:"btn-block"},U={class:"save-passWord-block"},V=i((()=>(0,r._)("label",{class:"card-post-label me-3",for:"male"},"記住我",-1))),E={key:0,class:"spinner-border spinner-border-sm",role:"status"},S=i((()=>(0,r._)("span",{class:"visually-hidden"},"Loading...",-1))),W=[S],q=(0,r.Uk)(" 註冊 "),z={key:0,class:"spinner-border spinner-border-sm",role:"status"},C=i((()=>(0,r._)("span",{class:"visually-hidden"},"Loading...",-1))),R=[C],x=(0,r.Uk)(" 登入 ");function A(s,e,t,i,S,C){return(0,r.wg)(),(0,r.iD)("div",n,[(0,r._)("main",l,[c,(0,r._)("div",g,[(0,r._)("div",u,[(0,r._)("div",d,[p,S.isSignup?((0,r.wg)(),(0,r.iD)("p",m,"註冊")):((0,r.wg)(),(0,r.iD)("p",h,"到原宇宙展開全新社交圈"))]),(0,r._)("div",w,[S.isRegister?((0,r.wg)(),(0,r.iD)("div",k,[(0,r.wy)((0,r._)("input",{onInput:e[0]||(e[0]=s=>C.formatVerify(!0)),"onUpdate:modelValue":e[1]||(e[1]=s=>S.user.name=s),type:"text",placeholder:"Name"},null,544),[[a.nr,S.user.name]]),S.state.name?((0,r.wg)(),(0,r.iD)("div",y,[(0,r._)("span",null,(0,o.zw)(S.errorMessage.name),1)])):(0,r.kq)("",!0)])):(0,r.kq)("",!0),(0,r._)("div",_,[(0,r.wy)((0,r._)("input",{onInput:e[2]||(e[2]=s=>C.formatVerify()),onKeyup:e[3]||(e[3]=(0,a.D2)(((...s)=>C.login&&C.login(...s)),["enter"])),"onUpdate:modelValue":e[4]||(e[4]=s=>S.user.email=s),type:"text",placeholder:"Email"},null,544),[[a.nr,S.user.email]]),S.state.email?((0,r.wg)(),(0,r.iD)("div",f,[(0,r._)("span",null,(0,o.zw)(S.errorMessage.email),1)])):(0,r.kq)("",!0)]),(0,r._)("div",b,[(0,r.wy)((0,r._)("input",{onInput:e[5]||(e[5]=s=>C.formatVerify()),onKeyup:e[6]||(e[6]=(0,a.D2)(((...s)=>C.login&&C.login(...s)),["enter"])),"onUpdate:modelValue":e[7]||(e[7]=s=>S.user.password=s),type:"password",name:"",id:" ",placeholder:"Password"},null,544),[[a.nr,S.user.password]]),S.state.password?((0,r.wg)(),(0,r.iD)("div",v,[(0,r._)("span",null,(0,o.zw)(S.errorMessage.password),1)])):(0,r.kq)("",!0)]),S.isRegister?((0,r.wg)(),(0,r.iD)("div",P,[(0,r.wy)((0,r._)("input",{onInput:e[8]||(e[8]=s=>C.formatVerify(!0)),"onUpdate:modelValue":e[9]||(e[9]=s=>S.user.confirmPassword=s),type:"password",placeholder:"再次輸入密碼"},null,544),[[a.nr,S.user.confirmPassword]]),S.state.confirmPassword?((0,r.wg)(),(0,r.iD)("div",D,[(0,r._)("span",null,(0,o.zw)(S.errorMessage.confirmPassword),1)])):(0,r.kq)("",!0)])):(0,r.kq)("",!0)]),S.errorMessage.loginError?((0,r.wg)(),(0,r.iD)("div",M,[(0,r._)("span",null,(0,o.zw)(S.errorMessage.loginError),1)])):(0,r.kq)("",!0),(0,r._)("div",I,[(0,r._)("div",U,[(0,r.wy)((0,r._)("input",{placeholder:"記住我",class:"me-2 mt-1",id:"male",type:"checkbox",value:"true","onUpdate:modelValue":e[10]||(e[10]=s=>S.savePassWord=s)},null,512),[[a.e8,S.savePassWord]]),V]),S.isRegister?((0,r.wg)(),(0,r.iD)(r.HY,{key:0},[(0,r._)("button",{onClick:e[11]||(e[11]=(...s)=>C.singUp&&C.singUp(...s)),type:"button",class:(0,o.C_)(["btn-login",S.isSignup?"btn-error":""])},[S.loading?((0,r.wg)(),(0,r.iD)("div",E,W)):(0,r.kq)("",!0),q],2),(0,r._)("button",{onClick:e[12]||(e[12]=(...s)=>C.checkButton&&C.checkButton(...s)),type:"button",class:"btn-signup"},"登入")],64)):((0,r.wg)(),(0,r.iD)(r.HY,{key:1},[(0,r._)("button",{onClick:e[13]||(e[13]=(...s)=>C.login&&C.login(...s)),type:"button",class:(0,o.C_)(["btn-login",S.isRegister?"btn-error":""])},[S.loading?((0,r.wg)(),(0,r.iD)("div",z,R)):(0,r.kq)("",!0),x],2),(0,r._)("button",{onClick:e[14]||(e[14]=(...s)=>C.checkButton&&C.checkButton(...s)),type:"button",class:(0,o.C_)(["btn-signup",S.isRegister?"btn-login":"btn-signup"])}," 註冊帳號 ",2)],64))])])])])])}var Z={name:"HomeView",data(){return{errorMessage:{name:null,email:null,passWord:null,signUpError:null,confirmPassword:null,loginError:null},state:{name:!1,email:!1,passWord:!1,signUpError:!1,confirmPassword:!1},loading:!1,isRegister:!1,isSignup:!1,user:{name:"",email:"",password:"",confirmPassword:""},savePassWord:!0}},methods:{formatVerify(s){const e=[],t=/^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/,r=/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,}$/;for(const a in this.state)this.state[a]=!1;return this.user.name.length<2&&s&&(this.state.name=!0,this.errorMessage.name="暱稱至少 2 個字元以上",e.push("name")),t.test(this.user.email)||(this.errorMessage.email="Email 格式錯誤",this.state.email=!0,e.push("email")),this.user.email||(this.errorMessage.email="Email 未輸入",this.state.email=!0,e.push("email2")),r.test(this.user.password)||(this.errorMessage.password="密碼需至少 8 碼以上，並數字英文混合",this.state.password=!0,e.push("signUpError")),this.user.confirmPassword===this.user.password&&this.user.confirmPassword||!s||(this.errorMessage.confirmPassword="與密碼不同",this.state.confirmPassword=!0,e.push("confirmPassword")),0===e.length},login(){this.formatVerify()&&(this.loading=!0,console.log(this.user),this.axios.post("https://ciye-social-site-api.herokuapp.com/users/sign_in",this.user).then((s=>{localStorage.setItem("test-token",s.data.user.token),console.log(s,"user"),this.$router.push("/posts"),this.loading=!1,this.savePassWord?localStorage.setItem("tempPassWord",JSON.stringify(this.user)):localStorage.setItem("tempPassWord","")})).catch((s=>{this.loading=!1,this.errorMessage.loginError=s.response.data.message,console.log(s.response,"getAllPost")})))},singUp(){this.formatVerify(!0)&&(this.loading=!0,this.axios.post("https://ciye-social-site-api.herokuapp.com/user/sign_up",this.user).then((s=>{localStorage.setItem("test-token",s.data.user.token),console.log(s,"user"),this.$router.push("/posts"),this.loading=!1})).catch((s=>{this.loading=!1,this.errorMessage.loginError=s.response.data.message,console.log(s.response,"getAllPost")})))},checkButton(){this.isRegister=!this.isRegister,this.user={name:"",email:"",password:"",confirmPassword:""};for(const s in this.state)this.state[s]=!1}},async mounted(){console.log(localStorage.getItem("tempPassWord")),localStorage.getItem("tempPassWord")&&(this.user=JSON.parse(localStorage.getItem("tempPassWord")))}},B=t(89);const H=(0,B.Z)(Z,[["render",A],["__scopeId","data-v-cc172ef6"]]);var $=H}}]);
//# sourceMappingURL=634.b842b53f.js.map